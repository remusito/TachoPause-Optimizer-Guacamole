(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2686],{2621:function(e,n,r){Promise.resolve().then(r.bind(r,6956))},9376:function(e,n,r){"use strict";var t=r(5475);r.o(t,"useParams")&&r.d(n,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(n,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(n,{useRouter:function(){return t.useRouter}})},6956:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return x}});var t=r(7437),a=r(2265),l=r(9376),i=r(323),s=r(641),o=r(5978),u=r(2381),d=r(279),c=r(9820),f=r(3340),m=r(7648);function x(){let{user:e,loading:n}=(0,i.aC)(),{firestore:r}=(0,s.f2)(),{toast:x}=(0,f.pm)(),h=(0,l.useRouter)(),p=(0,l.useParams)(),v=null==p?void 0:p.id,[g,b]=(0,a.useState)(null),[j,y]=(0,a.useState)({name:"",material:"",radioChannel:"",phone:"",schedule:"",location:"",notes:""}),[N,C]=(0,a.useState)(!0),[w,R]=(0,a.useState)(null);(0,a.useEffect)(()=>{r&&v&&e&&(async()=>{try{let n=await (0,o.QT)((0,o.JU)(r,"loads",v));if(n.exists()){let r=n.data();if(r.userId!==(null==e?void 0:e.uid)){R("No tienes permiso para editar esta carga");return}b({...r,id:n.id}),y({name:r.name||"",material:r.material||"",radioChannel:r.radioChannel||"",phone:r.phone||"",schedule:r.schedule||"",location:r.location||"",notes:r.notes||""})}else R("Carga no encontrada")}catch(e){R("Error al cargar los datos"),console.error(e)}finally{C(!1)}})()},[r,v,e]);let I=async n=>{if(n.preventDefault(),r&&v&&e)try{await (0,o.r7)((0,o.JU)(r,"loads",v),{...j,updatedAt:new Date().toISOString()}),x({title:"âœ… Actualizado",description:"La carga se ha actualizado correctamente."}),h.push("/loads/".concat(v))}catch(e){console.error("Error updating load:",e),x({title:"Error",description:"No se pudo actualizar la carga.",variant:"destructive"})}};return n||N||!v?(0,t.jsx)("div",{className:"flex flex-col min-h-dvh p-4 sm:p-6",children:"Cargando..."}):e?w?(0,t.jsx)("div",{className:"flex flex-col min-h-dvh p-4 sm:p-6",children:(0,t.jsx)(c.Zb,{className:"max-w-4xl mx-auto",children:(0,t.jsxs)(c.aY,{className:"py-8 text-center",children:[(0,t.jsx)("p",{className:"text-red-500",children:w}),(0,t.jsx)(u.z,{asChild:!0,className:"mt-4",children:(0,t.jsx)(m.default,{href:"/loads",children:"Volver a la lista"})})]})})}):(0,t.jsx)("div",{className:"flex flex-col min-h-dvh p-4 sm:p-6",children:(0,t.jsxs)(c.Zb,{className:"max-w-4xl mx-auto",children:[(0,t.jsx)(c.Ol,{children:(0,t.jsx)(c.ll,{children:"Editar Carga"})}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Nombre"}),(0,t.jsx)(d.I,{value:j.name,onChange:e=>y({...j,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Material"}),(0,t.jsx)(d.I,{value:j.material,onChange:e=>y({...j,material:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Ubicaci\xf3n"}),(0,t.jsx)(d.I,{value:j.location,onChange:e=>y({...j,location:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Tel\xe9fono"}),(0,t.jsx)(d.I,{value:j.phone,onChange:e=>y({...j,phone:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Canal de Radio"}),(0,t.jsx)(d.I,{value:j.radioChannel,onChange:e=>y({...j,radioChannel:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Horario"}),(0,t.jsx)(d.I,{value:j.schedule,onChange:e=>y({...j,schedule:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Notas"}),(0,t.jsx)(d.I,{value:j.notes,onChange:e=>y({...j,notes:e.target.value})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(u.z,{type:"submit",children:"Guardar Cambios"}),(0,t.jsx)(u.z,{variant:"outline",asChild:!0,children:(0,t.jsx)(m.default,{href:v?"/loads/".concat(v):"/loads",children:"Cancelar"})})]})]})})]})}):(0,t.jsx)(c.Zb,{className:"max-w-4xl mx-auto",children:(0,t.jsxs)(c.aY,{className:"py-8 text-center",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Inicia sesi\xf3n para editar cargas"}),(0,t.jsx)(u.z,{asChild:!0,children:(0,t.jsx)(m.default,{href:"/login",children:"Iniciar Sesi\xf3n"})})]})})}},2381:function(e,n,r){"use strict";r.d(n,{d:function(){return o},z:function(){return u}});var t=r(7437),a=r(2265),l=r(7053),i=r(535),s=r(3448);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,n)=>{let{className:r,variant:a,size:i,asChild:u=!1,...d}=e,c=u?l.g7:"button";return(0,t.jsx)(c,{className:(0,s.cn)(o({variant:a,size:i,className:r})),ref:n,...d})});u.displayName="Button"},9820:function(e,n,r){"use strict";r.d(n,{Ol:function(){return s},SZ:function(){return u},Zb:function(){return i},aY:function(){return d},eW:function(){return c},ll:function(){return o}});var t=r(7437),a=r(2265),l=r(3448);let i=a.forwardRef((e,n)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:n,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let s=a.forwardRef((e,n)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:n,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});s.displayName="CardHeader";let o=a.forwardRef((e,n)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:n,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let u=a.forwardRef((e,n)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:n,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});u.displayName="CardDescription";let d=a.forwardRef((e,n)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:n,className:(0,l.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let c=a.forwardRef((e,n)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:n,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})});c.displayName="CardFooter"},279:function(e,n,r){"use strict";r.d(n,{I:function(){return i}});var t=r(7437),a=r(2265),l=r(3448);let i=a.forwardRef((e,n)=>{let{className:r,type:a,...i}=e;return(0,t.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:n,...i})});i.displayName="Input"},323:function(e,n,r){"use strict";r.d(n,{CU:function(){return t.CU},Km:function(){return t.Km},T3:function(){return a.T3},aC:function(){return a.aC}}),r(738),r(3301),r(5978);var t=r(641),a=r(6349);r(257)},3448:function(e,n,r){"use strict";r.d(n,{cn:function(){return l}});var t=r(1994),a=r(3335);function l(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,a.m6)((0,t.W)(n))}},8575:function(e,n,r){"use strict";r.d(n,{F:function(){return l},e:function(){return i}});var t=r(2265);function a(e,n){if("function"==typeof e)return e(n);null!=e&&(e.current=n)}function l(...e){return n=>{let r=!1,t=e.map(e=>{let t=a(e,n);return r||"function"!=typeof t||(r=!0),t});if(r)return()=>{for(let n=0;n<t.length;n++){let r=t[n];"function"==typeof r?r():a(e[n],null)}}}}function i(...e){return t.useCallback(l(...e),e)}},7053:function(e,n,r){"use strict";r.d(n,{Z8:function(){return i},g7:function(){return s},sA:function(){return u}});var t=r(2265),a=r(8575),l=r(7437);function i(e){let n=function(e){let n=t.forwardRef((e,n)=>{let{children:r,...l}=e;if(t.isValidElement(r)){let e,i;let s=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,o=function(e,n){let r={...n};for(let t in n){let a=e[t],l=n[t];/^on[A-Z]/.test(t)?a&&l?r[t]=(...e)=>{let n=l(...e);return a(...e),n}:a&&(r[t]=a):"style"===t?r[t]={...a,...l}:"className"===t&&(r[t]=[a,l].filter(Boolean).join(" "))}return{...e,...r}}(l,r.props);return r.type!==t.Fragment&&(o.ref=n?(0,a.F)(n,s):s),t.cloneElement(r,o)}return t.Children.count(r)>1?t.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}(e),r=t.forwardRef((e,r)=>{let{children:a,...i}=e,s=t.Children.toArray(a),o=s.find(d);if(o){let e=o.props.children,a=s.map(n=>n!==o?n:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,l.jsx)(n,{...i,ref:r,children:t.isValidElement(e)?t.cloneElement(e,void 0,a):null})}return(0,l.jsx)(n,{...i,ref:r,children:a})});return r.displayName=`${e}.Slot`,r}var s=i("Slot"),o=Symbol("radix.slottable");function u(e){let n=({children:e})=>(0,l.jsx)(l.Fragment,{children:e});return n.displayName=`${e}.Slottable`,n.__radixId=o,n}function d(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}},535:function(e,n,r){"use strict";r.d(n,{j:function(){return i}});var t=r(1994);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=t.W,i=(e,n)=>r=>{var t;if((null==n?void 0:n.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:s}=n,o=Object.keys(i).map(e=>{let n=null==r?void 0:r[e],t=null==s?void 0:s[e];if(null===n)return null;let l=a(n)||a(t);return i[e][l]}),u=r&&Object.entries(r).reduce((e,n)=>{let[r,t]=n;return void 0===t||(e[r]=t),e},{});return l(e,o,null==n?void 0:null===(t=n.compoundVariants)||void 0===t?void 0:t.reduce((e,n)=>{let{class:r,className:t,...a}=n;return Object.entries(a).every(e=>{let[n,r]=e;return Array.isArray(r)?r.includes({...s,...u}[n]):({...s,...u})[n]===r})?[...e,r,t]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[4358,139,9555,6137,7648,6349,2971,2117,1744],function(){return e(e.s=2621)}),_N_E=e.O()}]);